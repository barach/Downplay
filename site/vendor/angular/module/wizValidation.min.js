angular.module("wiz.validation", ["wiz.validation.integer", "wiz.validation.decimal", "wiz.validation.dateOfBirth", "wiz.validation.postcode", "wiz.validation.zipcode", "wiz.validation.atLeastOne", "wiz.validation.equalTo", "wiz.validation.notEqualTo", "wiz.validation.unique", "wiz.validation.startsWith", "wiz.validation.endsWith", "wiz.validation.file", "wiz.validation.blacklist", "wiz.validation.whitelist", "wiz.validation.conditions"]), angular.module("wiz.validation.atLeastOne", []), angular.module("wiz.validation.blacklist", []), angular.module("wiz.validation.conditions", []), angular.module("wiz.validation.dateOfBirth", []), angular.module("wiz.validation.decimal", []), angular.module("wiz.validation.endsWith", []), angular.module("wiz.validation.equalTo", []), angular.module("wiz.validation.file", []), angular.module("wiz.validation.integer", []), angular.module("wiz.validation.notEqualTo", []), angular.module("wiz.validation.postcode", []), angular.module("wiz.validation.startsWith", []), angular.module("wiz.validation.unique", []), angular.module("wiz.validation.whitelist", []), angular.module("wiz.validation.zipcode", []), angular.module("wiz.validation.atLeastOne").service("wizAtLeastOneSvc", function () {
    this.values = [], this.cleanup = function () {
        this.values = []
    }, this.addValue = function (a) {
        "undefined" == typeof a.value && (a.value = "");
        for (var b = !1, c = 0; c < this.values.length; c++)
            if (this.values[c].name === a.name) {
                this.values[c] = a, b = !0;
                break
            }
        b || this.values.push(a)
    }, this.isEmpty = function (a) {
        for (var b = !0, c = 0; c < this.values.length; c++)
            if (this.values[c].value && this.values[c].group === a && this.values[c].value.length > 0) {
                b = !1;
                break
            }
        return b
    }
}), angular.module("wiz.validation.equalTo").service("wizEqualToSvc", ["$filter",
    function (a) {
        this.values = [], this.cleanup = function () {
            this.values = []
        }, this.addValue = function (a) {
            "undefined" == typeof a.value && (a.value = "");
            for (var b = !1, c = 0; c < this.values.length; c++)
                if (this.values[c].name === a.name) {
                    this.values[c] = a, b = !0;
                    break
                }
            b || this.values.push(a)
        }, this.isEqual = function (b) {
            for (var c = !0, d = a("filter")(this.values, {
                group: b
            }, !0), e = 0; e < d.length; e++)
                if (d[e].value !== d[0].value) {
                    c = !1;
                    break
                }
            return c
        }
    }
]), angular.module("wiz.validation.notEqualTo").service("wizNotEqualToSvc", ["$filter",
    function (a) {
        this.values = [], this.cleanup = function () {
            this.values = []
        }, this.addValue = function (a) {
            "undefined" == typeof a.value && (a.value = "");
            for (var b = !1, c = 0; c < this.values.length; c++)
                if (this.values[c].name === a.name) {
                    this.values[c] = a, b = !0;
                    break
                }
            b || this.values.push(a)
        }, this.isEqual = function (b) {
            for (var c = !0, d = a("filter")(this.values, {
                group: b
            }, !0), e = 0; e < d.length; e++)
                if (d[e].value !== d[0].value) {
                    c = !1;
                    break
                }
            return c
        }
    }
]), angular.module("wiz.validation.unique").service("wizUniqueSvc", ["$filter",
    function (a) {
        this.values = [], this.cleanup = function () {
            this.values = []
        }, this.addValue = function (a) {
            "undefined" == typeof a.value && (a.value = "");
            for (var b = !1, c = 0; c < this.values.length; c++)
                if (this.values[c].name === a.name) {
                    this.values[c] = a, b = !0;
                    break
                }
            b || this.values.push(a)
        }, this.isUnique = function (b) {
            for (var c = !0, d = a("filter")(this.values, {
                group: b
            }, !0), e = 0; e < d.length && c; e++)
                for (var f = 0; f < d.length; f++)
                    if (e !== f && d[e].value === d[f].value) {
                        c = !1;
                        break
                    }
            return c
        }
    }
]), angular.module("wiz.validation.atLeastOne").directive("wizValAtLeastOne", ["wizAtLeastOneSvc",
    function (a) {
        return {
            restrict: "A",
            require: "ngModel",
            link: function (b, c, d, e) {
                function f(b) {
                    a.addValue({
                        name: d.ngModel,
                        group: d.wizValAtLeastOne,
                        value: b
                    })
                }

                function g() {
                    var b = !1;
                   
                    a.isEmpty(d.wizValAtLeastOne) || (b = !0), e.$setValidity("wizValAtLeastOne", b)
                }
                e.$parsers.unshift(function (a) {
                    return f(a), false
                }), e.$formatters.unshift(function (a) {
                    return f(a), a
                }), b.$watch(function () {
                    return a.values
                }, function () {
                    g()
                }, !0), b.$on("$destroy", function () {
                    a.cleanup()
                })
            }
        }
    }
]), angular.module("wiz.validation.blacklist").directive("wizValBlacklist", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            blacklist: "=wizValBlacklist"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !0;
                if ("undefined" == typeof b && (b = ""), "undefined" != typeof a.blacklist)
                    for (var e = a.blacklist.length - 1; e >= 0; e--)
                        if (b === a.blacklist[e]) {
                            c = !1;
                            break
                        }
                return d.$setValidity("wizValBlacklist", c), b
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.conditions").directive("wizValConditions", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            conditions: "=wizValConditions"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !0;
                if ("undefined" != typeof a.conditions)
                    for (var e = 0; e < a.conditions.length; e++)
                        if (a.conditions[e] === !1) {
                            c = !1;
                            break
                        }
                return d.$setValidity("wizValConditions", c), b
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            }), "undefined" != typeof a.conditions && a.$watch("conditions", function () {
                e(d.$viewValue)
            }, !0)
        }
    }
}), angular.module("wiz.validation.dateOfBirth").directive("wizValDateOfBirth", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            wizValDateOfBirth: "=wizValDateOfBirth"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !0;
                
               
                if (angular.isDefined(b) && b.length > 0 && b && /^\d+$/.test(a.wizValDateOfBirth)) {
                    var e = new Date,
                        f = new Date(b),
                        g = e.getFullYear() - f.getFullYear(),
                        h = e.getMonth() - f.getMonth();
                        
						birthdayDate = new Date(f);
						dateNow = new Date();
						
						var years = dateNow.getFullYear() - birthdayDate.getFullYear();

                        
                    (0 > h || 0 === h && e.getDate() < f.getDate()) && g--, g < a.wizValDateOfBirth && (c = !1)
                   
                }
                var isValid = angular.isDefined(b) && b.length > 0 && b && /^\d+$/.test(a.wizValDateOfBirth); 
                if (isValid && years > a.wizValDateOfBirth){
                	return d.$setValidity("wizValDateOfBirth", c), b
                }else{
                	return d.$setValidity("wizValDateOfBirth", c), false
                }
                
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.decimal").directive("wizValDecimal", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            decimalPlaces: "=wizValDecimal"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !0;
                if (angular.isDefined(b) && b.length > 0) {
                    var e = "^-?([0-9]+)\\.([0-9]+)$";
                    /^-?[0-9]+$/.test(a.decimalPlaces) && (e = "^-?([0-9]+)\\.([0-9]{1," + a.decimalPlaces + "})$");
                    var f = new RegExp(e);
                    c = f.test(b)
                    console.log( f.test(b) )
	                if ( f.test(b) ){
	                	return d.$setValidity("wizValDecimal", c), b
	                }else{
	                	return d.$setValidity("wizValDecimal", c), false
	                }                    
                }

            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.endsWith").directive("wizValEndsWith", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            endsWith: "=wizValEndsWith"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !1;
                return "undefined" == typeof b && (b = ""), "undefined" != typeof a.endsWith && (c = -1 !== b.indexOf(a.endsWith, b.length - a.endsWith.length)), d.$setValidity("wizValEndsWith", c), b
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.equalTo").directive("wizValEqualTo", ["wizEqualToSvc",
    function (a) {
        return {
            restrict: "A",
            require: "ngModel",
            link: function (b, c, d, e) {
                function f(b) {
                    a.addValue({
                        name: d.ngModel,
                        group: d.wizValEqualTo,
                        value: b
                    })
                }

                function g() {                	
                    var b = a.isEqual(d.wizValEqualTo);                    
                    e.$setValidity("wizValEqualTo", b)
                    
                }
                e.$parsers.unshift(function (a) {
                    return f(a), a
                }), e.$formatters.unshift(function (a) {
                    return f(a), a
                }), b.$watch(function () {
                    return a.values
                }, function () {
                    g()
                }, !0), b.$on("$destroy", function () {
                    a.cleanup()
                })
            }
        }
    }
]), angular.module("wiz.validation.file").directive("wizValFile", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            fileTypes: "=wizValFileTypes",
            fileSize: "=wizValFileSize",
            fileNumber: "=wizValFileNumber"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !0,
                    e = !0,
                    f = !0;
                angular.isUndefined(a.fileTypes) && (a.fileTypes = []), angular.isDefined(a.fileNumber) && b.length > a.fileNumber && (f = !1);
                for (var g = 0; g < b.length; g++) {
                    var h = b[g];
                    if (-1 === a.fileTypes.indexOf(h.type) && a.fileTypes.length > 0 && (c = !1), angular.isNumber(a.fileSize) && h.size > a.fileSize && (e = !1), !c || !e) break
                }
                d.$setValidity("wizValFileTypes", c), d.$setValidity("wizValFileSize", e), d.$setValidity("wizValFileNumber", f)
            }
            b.bind("change", function () {
                e(b[0].files)
            })
        }
    }
}), angular.module("wiz.validation.integer").directive("wizValInteger", function () {
    return {
        restrict: "A",
        require: "ngModel",
        link: function (a, b, c, d) {
            function e(a) {
                var b = !0;
                var isValid = angular.isDefined(a) && a.length > 0 && (b = /^-?[0-9]+$/.test(a)); 
                if(isValid){
                	return isValid, d.$setValidity("wizValInteger", b), a
                }else{
                	if ( angular.isDefined(a) && a.length > 0){
               			return isValid, d.$setValidity("wizValInteger", b), false
               		}
                }
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.notEqualTo").directive("wizValNotEqualTo", ["wizNotEqualToSvc",
    function (a) {
        return {
            restrict: "A",
            require: "ngModel",
            link: function (b, c, d, e) {
                function f(b) {
                    a.addValue({
                        name: d.ngModel,
                        group: d.wizValNotEqualTo,
                        value: b
                    })
                }

                function g() {
                    var b = !a.isEqual(d.wizValNotEqualTo);
                    e.$setValidity("wizValNotEqualTo", b)
                }
                e.$parsers.unshift(function (a) {
                    return f(a), a
                }), e.$formatters.unshift(function (a) {
                    return f(a), a
                }), b.$watch(function () {
                    return a.values
                }, function () {
                    g()
                }, !0), b.$on("$destroy", function () {
                    a.cleanup()
                })
            }
        }
    }
]), angular.module("wiz.validation.postcode").directive("wizValPostcode", function () {
    return {
        restrict: "A",
        require: "ngModel",
        link: function (a, b, c, d) {
            function e(a) {
                var b = !0;
                return angular.isDefined(a) && a.length > 0 && (b = /^\b(GIR ?0AA|SAN ?TA1|(?:[A-PR-UWYZ](?:\d{0,2}|[A-HK-Y]\d|[A-HK-Y]\d\d|\d[A-HJKSTUW]|[A-HK-Y]\d[ABEHMNPRV-Y])) ?\d[ABD-HJLNP-UW-Z]{2})\b$/i.test(a)), d.$setValidity("wizValPostcode", b), a
            }
            d.$parsers.unshift(function (a) {            	
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.startsWith").directive("wizValStartsWith", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            startsWith: "=wizValStartsWith"
        },
        link: function (a, b, c, d) {
            function e(b) {
                "undefined" == typeof b && (b = "");
                var c = 0 === b.lastIndexOf(a.startsWith, 0);
                return d.$setValidity("wizValStartsWith", c), b
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.unique").directive("wizValUnique", ["wizUniqueSvc",
    function (a) {
        return {
            restrict: "A",
            require: "ngModel",
            link: function (b, c, d, e) {
                function f(b) {
                    a.addValue({
                        name: d.ngModel,
                        group: d.wizValUnique,
                        value: b
                    })
                }

                function g() {
                    var b = a.isUnique(d.wizValUnique);
                    e.$setValidity("wizValUnique", b)
                }
                e.$parsers.unshift(function (a) {
                    return f(a), a
                }), e.$formatters.unshift(function (a) {
                    return f(a), a
                }), b.$watch(function () {
                    return a.values
                }, function () {
                    g()
                }, !0), b.$on("$destroy", function () {
                    a.cleanup()
                })
            }
        }
    }
]), angular.module("wiz.validation.whitelist").directive("wizValWhitelist", function () {
    return {
        restrict: "A",
        require: "ngModel",
        scope: {
            whitelist: "=wizValWhitelist"
        },
        link: function (a, b, c, d) {
            function e(b) {
                var c = !1;
                if ("undefined" == typeof b && (b = ""), "undefined" != typeof a.whitelist)
                    for (var e = a.whitelist.length - 1; e >= 0; e--)
                        if (b === a.whitelist[e]) {
                            c = !0;
                            break
                        }
                return d.$setValidity("wizValWhitelist", c), b
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
}), angular.module("wiz.validation.zipcode").directive("wizValZipcode", function () {
    return {
        restrict: "A",
        require: "ngModel",
        link: function (a, b, c, d) {
            function e(a) {
                var b = !0;
                if( angular.isDefined(a) && a.length > 0 ){
                //return angular.isDefined(a) && a.length > 0 && (b = /(^\d{5}-?\d{4}$)|(^\d{5}$)/.test(a)), d.$setValidity("wizValZipcode", b), a                
                	return angular.isDefined(a) && a.length > 0 && (b = /(^\d{5}-?\d{4}$)|(^\d{5}$)/.test(a))
                }
            }
            d.$parsers.unshift(function (a) {
                return e(a)
            }), d.$formatters.unshift(function (a) {
                return e(a)
            })
        }
    }
});